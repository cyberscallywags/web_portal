{% extends "base.html" %}
{% block title %}{{ project.title if project else 'Project' }} - Cyber Scallywags{% endblock %}
{% block content %}

<!-- Project Header -->
<section class="project-header">
  <div class="container">
    <div class="row">
      <div class="col-lg-10 mx-auto">
        <div class="d-flex align-items-center justify-content-between mb-3">
          <div class="project-emoji">{{ project.emoji if project else 'üöÄ' }}</div>
          <span class="project-status status-{{ project.status if project else 'active' }}">
            {{ project.status if project else 'Active' }}
          </span>
        </div>
        <h1 class="project-title">{{ project.title if project else 'Loading Project...' }}</h1>
        <p class="project-description">{{ project.description if project else 'Loading description...' }}</p>
        
        <div class="project-meta">
          <div class="meta-item">
            <span class="meta-label">Created:</span>
            <span class="meta-value">{{ project.created_date if project else 'Unknown' }}</span>
          </div>
          <div class="meta-item">
            <span class="meta-label">Last Updated:</span>
            <span class="meta-value">{{ project.last_updated if project else 'Unknown' }}</span>
          </div>
          <div class="meta-item">
            <span class="meta-label">Contributors:</span>
            <span class="meta-value">{{ project.contributors|length if project and project.contributors else 0 }}</span>
          </div>
        </div>
        
        <div class="project-links">
          {% if project and project.github_url %}
            <a href="{{ project.github_url }}" target="_blank" rel="noopener" class="btn btn-primary">
              üìÇ View on GitHub
            </a>
          {% endif %}
          {% if project and project.demo_url %}
            <a href="{{ project.demo_url }}" target="_blank" rel="noopener" class="btn btn-success">
              üîó Live Demo
            </a>
          {% endif %}
          <a href="/projects" class="btn btn-outline-secondary">
            ‚Üê Back to Projects
          </a>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Project Details -->
<section class="project-details py-5">
  <div class="container">
    <div class="row">
      <!-- Main Content -->
      <div class="col-lg-8">
        <!-- Technologies -->
        <div class="section-card mb-4">
          <h3>Technologies Used</h3>
          <div class="tech-stack" id="techStack">
            <!-- Technologies will be loaded here -->
          </div>
        </div>
        
        <!-- Project Overview -->
        <div class="section-card mb-4">
          <h3>Project Overview</h3>
          <div id="projectOverview">
            <!-- Project details will be loaded here -->
          </div>
        </div>
        
        <!-- Features -->
        <div class="section-card mb-4">
          <h3>Key Features</h3>
          <div id="projectFeatures">
            <!-- Features will be loaded here -->
          </div>
        </div>
        
        <!-- Installation & Usage -->
        <div class="section-card mb-4">
          <h3>Getting Started</h3>
          <div id="gettingStarted">
            <!-- Installation instructions will be loaded here -->
          </div>
        </div>
      </div>
      
      <!-- Sidebar -->
      <div class="col-lg-4">
        <!-- Contributors -->
        <div class="sidebar-card mb-4">
          <h4>Contributors</h4>
          <div class="contributors-list" id="contributorsList">
            <!-- Contributors will be loaded here -->
          </div>
        </div>
        
        <!-- Project Stats -->
        <div class="sidebar-card mb-4">
          <h4>Project Statistics</h4>
          <div class="stats-list" id="projectStats">
            <!-- Stats will be loaded here -->
          </div>
        </div>
        
        <!-- Related Projects -->
        <div class="sidebar-card mb-4">
          <h4>Related Projects</h4>
          <div class="related-projects" id="relatedProjects">
            <!-- Related projects will be loaded here -->
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
.project-header {
  background: linear-gradient(120deg, #161a3a, #3a1d5e, #0e6abd);
  color: white;
  padding: 4rem 0;
}

.project-emoji {
  font-size: 4rem;
  line-height: 1;
}

.project-status {
  padding: 0.5rem 1rem;
  border-radius: 25px;
  font-size: 0.85rem;
  font-weight: 600;
  text-transform: uppercase;
}

.status-active { background: #28a745; color: white; }
.status-completed { background: #6c757d; color: white; }
.status-planning { background: #ffc107; color: #212529; }
.status-maintenance { background: #17a2b8; color: white; }

.project-title {
  color: #C1E415;
  font-size: 2.5rem;
  font-weight: 700;
  margin: 1rem 0;
  line-height: 1.2;
}

.project-description {
  font-size: 1.2rem;
  line-height: 1.6;
  margin-bottom: 2rem;
  opacity: 0.9;
}

.project-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 2rem;
  margin-bottom: 2rem;
  font-size: 0.9rem;
}

.meta-item {
  display: flex;
  flex-direction: column;
}

.meta-label {
  opacity: 0.7;
  font-size: 0.8rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.meta-value {
  font-weight: 600;
  font-size: 1rem;
}

.project-links {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
}

.section-card, .sidebar-card {
  background: white;
  border-radius: 12px;
  padding: 2rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.sidebar-card {
  padding: 1.5rem;
}

.section-card h3, .sidebar-card h4 {
  color: #4006a7;
  margin-bottom: 1.5rem;
  font-weight: 600;
}

.tech-stack {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
}

.tech-tag {
  background: linear-gradient(45deg, #4006a7, #C1E415);
  color: white;
  padding: 0.5rem 1rem;
  border-radius: 25px;
  font-size: 0.9rem;
  font-weight: 500;
}

.contributor-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 0.75rem 0;
  border-bottom: 1px solid #f0f0f0;
  cursor: pointer;
  transition: background 0.2s ease;
}

.contributor-item:hover {
  background: #f8f9fa;
  border-radius: 8px;
  padding-left: 0.5rem;
}

.contributor-item:last-child {
  border-bottom: none;
}

.contributor-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: #C1E415;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #4006a7;
  font-weight: bold;
}

.contributor-info {
  flex: 1;
}

.contributor-name {
  font-weight: 600;
  color: #333;
}

.contributor-role {
  font-size: 0.85rem;
  color: #666;
}

.stats-list {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.stat-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.75rem 0;
  border-bottom: 1px solid #f0f0f0;
}

.stat-item:last-child {
  border-bottom: none;
}

.stat-label {
  color: #666;
  font-size: 0.9rem;
}

.stat-value {
  font-weight: 600;
  color: #4006a7;
}

.related-project {
  padding: 1rem 0;
  border-bottom: 1px solid #f0f0f0;
  cursor: pointer;
  transition: background 0.2s ease;
}

.related-project:hover {
  background: #f8f9fa;
  border-radius: 8px;
  padding-left: 0.5rem;
}

.related-project:last-child {
  border-bottom: none;
}

.related-project-title {
  font-weight: 600;
  color: #4006a7;
  font-size: 0.95rem;
}

.related-project-desc {
  color: #666;
  font-size: 0.85rem;
  margin-top: 0.25rem;
}

.code-block {
  background: #f8f9fa;
  border: 1px solid #e9ecef;
  border-radius: 8px;
  padding: 1rem;
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  font-size: 0.9rem;
  margin: 1rem 0;
}

/* Responsive Design */
@media (max-width: 768px) {
  .project-title {
    font-size: 2rem;
  }
  
  .project-meta {
    flex-direction: column;
    gap: 1rem;
  }
  
  .project-links {
    flex-direction: column;
  }
  
  .section-card, .sidebar-card {
    padding: 1.5rem;
  }
}
</style>

<script>
// Get project data from URL or use sample data
const projectSlug = window.location.pathname.split('/').pop();

// Sample project data - replace with API call
const sampleProjectData = {
  "id": 1,
  "title": "Community Learning Platform",
  "slug": "community-learning-platform",
  "description": "An open-source platform for community-driven learning with interactive coding challenges, peer mentoring, and collaborative projects. Built to democratize access to quality programming education and foster inclusive learning environments.",
  "emoji": "üìö",
  "status": "active",
  "technologies": ["Python", "Django", "JavaScript", "React", "PostgreSQL", "Docker"],
  "github_url": "https://github.com/cyberscallywags/learning-platform",
  "demo_url": "https://learn.cyberscallywags.uk",
  "contributors": [
    {
      "name": "Colin Moore-Hill",
      "role": "Lead Developer",
      "emoji": "üê∫",
      "team_slug": "colin-moore-hill"
    },
    {
      "name": "Kishion Layne",
      "role": "Data Analyst",
      "emoji": "üìä",
      "team_slug": "kishion-layne"
    },
    {
      "name": "Dean Foulds",
      "role": "Technical Architect",
      "emoji": "üî¨",
      "team_slug": "dean-foulds"
    }
  ],
  "created_date": "January 15, 2025",
  "last_updated": "October 28, 2025",
  "stats": {
    "commits": 342,
    "issues_closed": 89,
    "stars": 127,
    "forks": 34,
    "contributors": 8,
    "releases": 12
  },
  "features": [
    "Interactive coding challenges with real-time feedback",
    "Peer-to-peer mentoring system",
    "Project-based learning modules",
    "Community forums and discussion boards",
    "Progress tracking and achievement badges",
    "Multilingual support for accessibility"
  ],
  "overview": "The Community Learning Platform represents our commitment to democratizing access to quality programming education. Built from the ground up with community input, this platform serves learners from all backgrounds and skill levels. Whether you're taking your first steps into coding or looking to contribute back to the community as a mentor, our platform provides the tools and environment you need to succeed.",
  "installation": `# Clone the repository
git clone https://github.com/cyberscallywags/learning-platform.git
cd learning-platform

# Set up virtual environment
python -m venv venv
source venv/bin/activate  # On Windows: venv\\Scripts\\activate

# Install dependencies
pip install -r requirements.txt

# Set up database
python manage.py migrate
python manage.py createsuperuser

# Run development server
python manage.py runserver

# Visit http://localhost:8000 to get started!`
};

// Related projects
const relatedProjectsData = [
  {
    "title": "AI Ethics Toolkit",
    "description": "Comprehensive toolkit for ethical AI practices",
    "slug": "ai-ethics-toolkit"
  },
  {
    "title": "Youth Coding Bootcamp Curriculum", 
    "description": "Open-source curriculum for teaching programming",
    "slug": "youth-coding-bootcamp-curriculum"
  }
];

// Load project content
document.addEventListener('DOMContentLoaded', function() {
  loadProjectContent(sampleProjectData);
  loadRelatedProjects();
});

function loadProjectContent(projectData) {
  // Update page title
  document.title = `${projectData.title} - Cyber Scallywags`;
  
  // Load technologies
  const techStack = document.getElementById('techStack');
  if (techStack && projectData.technologies) {
    techStack.innerHTML = projectData.technologies.map(tech => 
      `<span class="tech-tag">${tech}</span>`
    ).join('');
  }
  
  // Load project overview
  const overview = document.getElementById('projectOverview');
  if (overview) {
    overview.innerHTML = `<p>${projectData.overview}</p>`;
  }
  
  // Load features
  const features = document.getElementById('projectFeatures');
  if (features && projectData.features) {
    const featuresList = projectData.features.map(feature => 
      `<li>${feature}</li>`
    ).join('');
    features.innerHTML = `<ul>${featuresList}</ul>`;
  }
  
  // Load installation instructions
  const gettingStarted = document.getElementById('gettingStarted');
  if (gettingStarted && projectData.installation) {
    gettingStarted.innerHTML = `<div class="code-block"><pre>${projectData.installation}</pre></div>`;
  }
  
  // Load contributors
  const contributors = document.getElementById('contributorsList');
  if (contributors && projectData.contributors) {
    contributors.innerHTML = projectData.contributors.map(contributor => `
      <div class="contributor-item" onclick="window.location.href='/team#${contributor.team_slug}'">
        <div class="contributor-avatar">${contributor.emoji}</div>
        <div class="contributor-info">
          <div class="contributor-name">${contributor.name}</div>
          <div class="contributor-role">${contributor.role}</div>
        </div>
      </div>
    `).join('');
  }
  
  // Load project statistics
  const stats = document.getElementById('projectStats');
  if (stats && projectData.stats) {
    stats.innerHTML = Object.entries(projectData.stats).map(([key, value]) => `
      <div class="stat-item">
        <span class="stat-label">${key.replace(/_/g, ' ').toUpperCase()}</span>
        <span class="stat-value">${value}</span>
      </div>
    `).join('');
  }
}

function loadRelatedProjects() {
  const relatedContainer = document.getElementById('relatedProjects');
  if (relatedContainer) {
    relatedContainer.innerHTML = relatedProjectsData.map(project => `
      <div class="related-project" onclick="window.location.href='/project/${project.slug}'">
        <div class="related-project-title">${project.title}</div>
        <div class="related-project-desc">${project.description}</div>
      </div>
    `).join('');
  }
}
</script>

{% endblock %}
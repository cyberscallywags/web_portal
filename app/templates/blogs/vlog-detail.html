{% extends "base.html" %}
{% block title %}{{ blog.title if blog else 'Vlog' }} - Cyber Scallywags{% endblock %}
{% block content %}

<style>
.vlog-detail-hero {
  background: linear-gradient(135deg, #CC0084 0%, #4006a7 50%, #0e6abd 100%);
  padding: 4rem 0 3rem;
  position: relative;
  overflow: hidden;
  margin-bottom: 3rem;
}

.vlog-detail-hero::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, rgba(193, 228, 21, 0.1) 1px, transparent 1px);
  background-size: 50px 50px;
  animation: moveGrid 20s linear infinite;
}

@keyframes moveGrid {
  0% { transform: translate(0, 0); }
  100% { transform: translate(50px, 50px); }
}

.vlog-detail-content {
  position: relative;
  z-index: 1;
}

.back-link {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  color: white;
  text-decoration: none;
  font-weight: 600;
  margin-bottom: 1.5rem;
  transition: all 0.3s ease;
  padding: 0.5rem 1rem;
  border-radius: 8px;
}

.back-link:hover {
  background: rgba(255, 255, 255, 0.1);
  color: #C1E415;
  transform: translateX(-5px);
}

.vlog-detail-title {
  font-size: 3rem;
  font-weight: 900;
  color: white;
  margin-bottom: 1.5rem;
  line-height: 1.2;
  text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.vlog-meta-header {
  display: flex;
  align-items: center;
  gap: 2rem;
  flex-wrap: wrap;
  margin-bottom: 1rem;
}

.creator-info {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.creator-avatar {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: linear-gradient(135deg, #CC0084, #4006a7);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: bold;
  font-size: 1.3rem;
  border: 3px solid white;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.creator-details {
  display: flex;
  flex-direction: column;
}

.creator-name {
  font-weight: 700;
  font-size: 1.1rem;
  color: white;
}

.creator-bio {
  font-size: 0.9rem;
  color: rgba(255, 255, 255, 0.8);
}

.video-info {
  display: flex;
  align-items: center;
  gap: 1.5rem;
  color: rgba(255, 255, 255, 0.9);
  font-size: 0.95rem;
}

.video-info span {
  display: flex;
  align-items: center;
  gap: 0.3rem;
}

.vlog-tags-header {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.vlog-tag {
  background: rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(10px);
  color: white;
  padding: 0.4rem 1rem;
  border-radius: 20px;
  font-size: 0.85rem;
  font-weight: 600;
  border: 2px solid rgba(204, 0, 132, 0.5);
  transition: all 0.3s ease;
}

.vlog-tag:hover {
  background: #C1E415;
  color: #4006a7;
  border-color: #C1E415;
  transform: scale(1.05);
}

.main-content {
  background: white;
}

.content-wrapper {
  max-width: 900px;
  margin: 0 auto;
}

.video-player-section {
  margin-bottom: 3rem;
}

.video-player-wrapper {
  border-radius: 20px;
  overflow: hidden;
  box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
  background: linear-gradient(135deg, #CC0084, #4006a7);
  position: relative;
  aspect-ratio: 16 / 9;
}

.video-player-wrapper img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.video-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, #CC0084, #4006a7);
  position: relative;
}

.play-button {
  width: 100px;
  height: 100px;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 3rem;
  color: #CC0084;
  cursor: pointer;
  transition: all 0.3s ease;
  animation: pulse 2s ease-in-out infinite;
}

.play-button:hover {
  background: #C1E415;
  color: #4006a7;
  transform: scale(1.1);
}

@keyframes pulse {
  0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.7); }
  50% { transform: scale(1.05); box-shadow: 0 0 0 20px rgba(255, 255, 255, 0); }
}

.featured-emoji {
  font-size: 8rem;
  position: absolute;
  opacity: 0.3;
}

.article-content {
  background: white;
  padding: 2rem;
  border-radius: 20px;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
  margin-bottom: 2rem;
}

.excerpt {
  font-size: 1.3rem;
  line-height: 1.8;
  color: #555;
  font-weight: 300;
  font-style: italic;
  border-left: 5px solid #CC0084;
  padding-left: 1.5rem;
  margin-bottom: 2rem;
  background: rgba(204, 0, 132, 0.05);
  padding: 1.5rem 1.5rem 1.5rem 2rem;
  border-radius: 0 12px 12px 0;
}

.content {
  font-size: 1.1rem;
  line-height: 1.9;
  color: #333;
}

.content h2, .content h3 {
  color: #CC0084;
  font-weight: 700;
  margin-top: 2.5rem;
  margin-bottom: 1.2rem;
}

.content h2 {
  font-size: 2rem;
  border-bottom: 3px solid #CC0084;
  padding-bottom: 0.5rem;
}

.content h3 {
  font-size: 1.5rem;
}

.content p {
  margin-bottom: 1.5rem;
}

.content ul, .content ol {
  margin-bottom: 1.5rem;
  padding-left: 2rem;
}

.content li {
  margin-bottom: 0.75rem;
}

.content strong {
  color: #CC0084;
  font-weight: 700;
}

.content a {
  color: #4006a7;
  text-decoration: underline;
  transition: color 0.3s ease;
}

.content a:hover {
  color: #CC0084;
}

.content blockquote {
  border-left: 5px solid #CC0084;
  padding-left: 1.5rem;
  margin: 2rem 0;
  font-style: italic;
  color: #666;
  background: rgba(204, 0, 132, 0.05);
  padding: 1rem 1.5rem;
  border-radius: 0 12px 12px 0;
}

.content code {
  background: #f8f9fa;
  padding: 0.2rem 0.5rem;
  border-radius: 4px;
  color: #CC0084;
  font-family: 'Courier New', monospace;
}

.content pre {
  background: #1e1e1e;
  color: #C1E415;
  padding: 1.5rem;
  border-radius: 12px;
  overflow-x: auto;
  margin: 1.5rem 0;
}

.vlog-actions {
  background: white;
  padding: 2rem;
  border-radius: 20px;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
  margin-bottom: 2rem;
}

.share-buttons {
  display: flex;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.share-label {
  font-weight: 700;
  color: #CC0084;
  font-size: 1.1rem;
}

.share-btn {
  padding: 0.6rem 1.5rem;
  border-radius: 25px;
  font-weight: 600;
  text-decoration: none;
  transition: all 0.3s ease;
  border: 2px solid;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
}

.share-btn-twitter {
  background: #1DA1F2;
  color: white;
  border-color: #1DA1F2;
}

.share-btn-twitter:hover {
  background: white;
  color: #1DA1F2;
  transform: translateY(-2px);
}

.share-btn-linkedin {
  background: #0077B5;
  color: white;
  border-color: #0077B5;
}

.share-btn-linkedin:hover {
  background: white;
  color: #0077B5;
  transform: translateY(-2px);
}

.share-btn-facebook {
  background: #1877F2;
  color: white;
  border-color: #1877F2;
}

.share-btn-facebook:hover {
  background: white;
  color: #1877F2;
  transform: translateY(-2px);
}

.related-section {
  background: linear-gradient(to bottom, #f8f9fa, white);
  padding: 3rem 0;
}

.related-title {
  font-size: 2rem;
  font-weight: 800;
  color: #CC0084;
  margin-bottom: 2rem;
  text-align: center;
}

.related-card {
  background: white;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
  transition: all 0.3s ease;
  height: 100%;
  cursor: pointer;
  border-top: 4px solid #CC0084;
}

.related-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 30px rgba(204, 0, 132, 0.15);
}

.related-video {
  height: 150px;
  background: linear-gradient(135deg, #CC0084, #4006a7);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 3rem;
  position: relative;
}

.related-video::after {
  content: '‚ñ∂';
  position: absolute;
  font-size: 2rem;
  color: white;
}

.related-body {
  padding: 1.25rem;
}

.related-card-title {
  color: #CC0084;
  font-size: 1.1rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  line-height: 1.3;
}

.related-excerpt {
  color: #666;
  font-size: 0.9rem;
  line-height: 1.5;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

@media (max-width: 768px) {
  .vlog-detail-title {
    font-size: 2rem;
  }
  
  .vlog-meta-header {
    flex-direction: column;
    gap: 1rem;
  }
  
  .video-info {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.5rem;
  }
  
  .share-buttons {
    flex-direction: column;
    align-items: stretch;
  }
}
</style>

<!-- Vlog Header -->
<section class="vlog-detail-hero">
  <div class="container">
    <div class="vlog-detail-content">
      <div class="row">
        <div class="col-lg-10 mx-auto">
          <a href="/vlogs" class="back-link">‚Üê Back to Vlogs</a>
          <h1 class="vlog-detail-title">{{ blog.title if blog else 'Loading...' }}</h1>
          
          <div class="vlog-meta-header">
            <div class="creator-info">
              <div class="creator-avatar">{{ blog.author.name[0] if blog and blog.author else 'V' }}</div>
              <div class="creator-details">
                <span class="creator-name">{{ blog.author.name if blog and blog.author else 'Unknown Creator' }}</span>
                <span class="creator-bio">{{ blog.author.bio if blog and blog.author else 'Content Creator' }}</span>
              </div>
            </div>
            
            <div class="video-info">
              <span>üìÖ {{ blog.published_date if blog else '' }}</span>
              <span>‚è±Ô∏è {{ blog.read_time if blog else '' }}</span>
              <span>üëÅÔ∏è {{ blog.views if blog else 0 }} views</span>
            </div>
          </div>
          
          <div class="vlog-tags-header">
            {% if blog and blog.tags %}
              {% for tag in blog.tags %}
                <span class="vlog-tag">{{ tag }}</span>
              {% endfor %}
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Vlog Content -->
<section class="main-content py-5">
  <div class="container">
    <div class="content-wrapper">
      <!-- Video Player -->
      <div class="video-player-section">
        <div class="video-player-wrapper">
          {% if blog and blog.featured_image %}
          <img src="{{ blog.featured_image }}" alt="{{ blog.title }}">
          {% else %}
          <div class="video-placeholder">
            <span class="featured-emoji">üé¨</span>
            <div class="play-button">‚ñ∂</div>
          </div>
          {% endif %}
        </div>
      </div>
      
      <!-- Article Content -->
      <article class="article-content">
        {% if blog and blog.excerpt %}
        <div class="excerpt">
          {{ blog.excerpt }}
        </div>
        {% endif %}
        
        <div class="content">
          <div id="blogContent">
            {% if blog and blog.content %}
              {{ blog.content | safe }}
            {% else %}
              <p class="text-muted">Content will be loaded here...</p>
            {% endif %}
          </div>
        </div>
      </article>
      
      <!-- Share & Actions -->
      <div class="vlog-actions">
        <div class="share-buttons">
          <span class="share-label">Share this vlog:</span>
          <a href="#" class="share-btn share-btn-twitter">üê¶ Twitter</a>
          <a href="#" class="share-btn share-btn-linkedin">üíº LinkedIn</a>
          <a href="#" class="share-btn share-btn-facebook">üìò Facebook</a>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Related Vlogs -->
<section class="related-section">
  <div class="container">
    <h2 class="related-title">Related Videos</h2>
    <div class="row g-4">
      <div class="col-lg-10 mx-auto">
        <div id="relatedPosts" class="row g-4">
          <!-- Related vlogs will be loaded here -->
        </div>
      </div>
    </div>
  </div>
</section>

<script>
// Get blog data from URL or use sample data
  background: #C1E415;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #4006a7;
  font-weight: bold;
  font-size: 1.2rem;
}

.author-details {
  display: flex;
  flex-direction: column;
}

.author-name {
  font-weight: 600;
  font-size: 1.1rem;
}

.author-bio {
  font-size: 0.9rem;
  opacity: 0.8;
}

.post-info {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  font-size: 0.9rem;
  opacity: 0.9;
}

.blog-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.blog-tag {
  background: rgba(193, 228, 21, 0.2);
  color: #C1E415;
  padding: 0.3rem 0.8rem;
  border-radius: 20px;
  font-size: 0.8rem;
  border: 1px solid #C1E415;
}

.featured-image {
  text-align: center;
  margin-bottom: 2rem;
}

.featured-image img {
  width: 100%;
  max-height: 500px;
  object-fit: contain;
  background-color: #f8f9fa;
}

.image-placeholder {
  width: 100%;
  height: 300px;
  background: linear-gradient(45deg, #4006a7, #C1E415);
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.featured-emoji {
  font-size: 6rem;
  color: white;
}

.article-content {
  font-size: 1.1rem;
  line-height: 1.8;
  color: #333;
}

.article-content h3 {
  color: #4006a7;
  font-weight: 700;
  margin-top: 2rem;
  margin-bottom: 1rem;
}

.article-content p {
  margin-bottom: 1.5rem;
}

.article-content ul, .article-content ol {
  margin-bottom: 1.5rem;
  padding-left: 2rem;
}

.article-content li {
  margin-bottom: 0.5rem;
}

.article-content strong {
  color: #C1E415;
  font-weight: 600;
}

.excerpt {
  border-left: 4px solid #C1E415;
  padding-left: 1.5rem;
  font-style: italic;
  color: #666;
  background: rgba(193, 228, 21, 0.05);
  padding: 1rem 1.5rem;
  border-radius: 0 8px 8px 0;
}

.content {
  color: #333;
  background: white;
  padding: 2rem;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

.content h3 {
  color: #4006a7;
  margin-top: 2rem;
  margin-bottom: 1rem;
}

.content p {
  line-height: 1.8;
  margin-bottom: 1.5rem;
}

.blog-actions {
  border-top: 2px solid #e9ecef;
  padding-top: 2rem;
  margin-top: 3rem;
}

.share-buttons {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.share-buttons a {
  border-color: #4006a7;
  color: #4006a7;
  transition: all 0.3s ease;
}

.share-buttons a:hover {
  background-color: #4006a7;
  color: white;
}

.related-post-card {
  border: 2px solid #e9ecef;
  border-radius: 12px;
  padding: 1.5rem;
  background: white;
  transition: all 0.3s ease;
  cursor: pointer;
  height: 100%;
}

.related-post-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 20px rgba(64, 6, 167, 0.15);
  border-color: #C1E415;
}

.related-post-card h6 {
  color: #4006a7;
  font-weight: 600;
  margin-bottom: 0.75rem;
}

/* Responsive Design */
@media (max-width: 768px) {
  .blog-title {
    font-size: 2rem;
  }
  
  .blog-meta {
    flex-direction: column;
    align-items: flex-start;
  }
  
  .post-info {
    align-items: flex-start;
  }
  
  .blog-actions {
    text-align: center;
  }
  
  .blog-actions .d-flex {
    flex-direction: column;
    gap: 1rem;
  }
}
</style>

<script>
// Get blog data from URL or use sample data
const blogSlug = window.location.pathname.split('/').pop();

// Sample blog data - replace with API call
const sampleBlogData = {
  "id": 1,
  "title": "Building Communities Through Code: The Cyber Scallywags Way",
  "slug": "building-communities-through-code",
  "excerpt": "Discover how we're using technology to bring people together and create lasting change in our communities. From workshops to open-source projects, learn about our grassroots approach to making technology accessible and meaningful for everyone.",
  "content": `
    <p>In a world increasingly dominated by big tech and profit-driven algorithms, there's something revolutionary about choosing purpose over profit. At Cyber Scallywags, we believe that technology should serve communities, not control them.</p>
    
    <h3>The Genesis of Our Movement</h3>
    <p>Born in the neon shadows of forgotten steel towns and weather-worn seaside streets, Cyber Scallywags emerged from a simple but powerful idea: that technology can be a force for good when it's built by and for the people who use it.</p>
    
    <p>We're not your typical tech company. We're the dreamers and doers who live between the circuits ‚Äî the coders, makers, and data-misfits who understand that behind every line of code is an opportunity to make someone's life better.</p>
    
    <h3>Community-Driven Development</h3>
    <p>Our approach to building technology is fundamentally different. Instead of starting with the technology and finding users, we start with the community and find solutions. This means:</p>
    
    <ul>
      <li><strong>Listening First:</strong> We spend time in communities, understanding real needs and challenges before we write a single line of code.</li>
      <li><strong>Inclusive Design:</strong> Our projects are built with accessibility and inclusion at their core, not as an afterthought.</li>
      <li><strong>Open by Default:</strong> Everything we build is open source, ensuring that communities can own and modify their tools.</li>
      <li><strong>Skills Sharing:</strong> We don't just build tools; we teach others to build them too.</li>
    </ul>
    
    <h3>Real Projects, Real Impact</h3>
    <p>Our community learning platform has helped over 500 people take their first steps into coding. Our local business directory API supports 15 community organizations across Wales. These aren't just numbers ‚Äî they represent individuals whose lives have been touched by technology that truly serves them.</p>
    
    <h3>The Path Forward</h3>
    <p>We're not here to hack the system. We're here to rewrite it ‚Äî together. Every workshop we run, every open-source project we release, and every collaboration we foster is a step toward a more equitable digital future.</p>
    
    <p>Join us in lighting up the digital night with ideas powered by kindness, not capital. Because our code isn't just syntax ‚Äî it's solidarity.</p>
  `,
  "author": {
    "name": "Sarah Chen",
    "bio": "Community Lead & Full-stack Developer",
    "avatar": "/static/images/authors/sarah.jpg"
  },
  "published_date": "October 25, 2025",
  "featured_image": "/static/images/blog/community-code.jpg",
  "tags": ["community", "technology", "open-source", "social-impact"],
  "read_time": "5 min read",
  "status": "published",
  "views": 1250,
  "featured": true
};

// Load blog content
document.addEventListener('DOMContentLoaded', function() {
  // In a real app, you'd fetch this based on the slug
  // For now, we'll use sample data
  loadBlogContent(sampleBlogData);
  loadRelatedPosts();
});

function loadBlogContent(blogData) {
  // Update meta information
  document.title = `${blogData.title} - Cyber Scallywags`;
  
  // Format and display content
  const contentDiv = document.getElementById('blogContent');
  if (contentDiv) {
    contentDiv.innerHTML = blogData.content;
  }
}

function loadRelatedPosts() {
  const relatedContainer = document.getElementById('relatedPosts');
  
  // Sample related posts
  const relatedPosts = [
    {
      title: "Getting Started with Python: A Beginner's Journey",
      excerpt: "New to coding? Start your journey with Python!",
      slug: "getting-started-python-beginners",
      read_time: "8 min read"
    },
    {
      title: "Open Source Contribution Guide",
      excerpt: "Want to contribute to open source but don't know where to start?",
      slug: "open-source-contribution-guide", 
      read_time: "10 min read"
    }
  ];
  
  let html = '';
  relatedPosts.forEach(post => {
    html += `
      <div class="col-md-6">
        <div class="related-post-card" onclick="window.location.href='/blog/${post.slug}'">
          <h6>${post.title}</h6>
          <p class="text-muted mb-2">${post.excerpt}</p>
          <small class="text-primary">${post.read_time}</small>
        </div>
      </div>
    `;
  });
  
  relatedContainer.innerHTML = html;
}
</script>

{% endblock %}